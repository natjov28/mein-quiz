<!DOCTYPE html>
<html style="line-height:0">

<head>
<title>Quiz</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>

<style>
html,body{ margin:0; padding:0; 
  height:100%;
  width:100%;
  overflow:hidden;
  background-color: #f7dd00;
}

.full-size{
  height:100%;
  width:100%;
}

.container {
  display: inline;
}

.panel {
  
}

.pitanje-cont {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  width: 100%;
  word-break: break-word;
  font-size: 32px;
  text-align: center;
}

.block{
	display: flex;
	align-items: center;
}

.border-list{
	border: 1px dashed black;
	border-left-style: none;
	border-right-style: none;
	
}

.popup{
  animation: popup 0.5s;
}

@keyframes popup {
  0%{
    transform: scale(0);
	height: 100%;
  }
  50%{
    transform: scale(0.6);
	height: 100%;
  }
  60%{
    transform: scale(0.6);
	height: 100%;
  }
  70%{
    transform: scale(0.6);
	height: 100%;
  }
  80%{
    transform: scale(0.6);
	height: 100%;
  }
  90%{
    transform: scale(0.6);
	height: 100%;
  }
  100%{
    transform: scale(0.6);
	height: 0px;
  }
}

</style>

<div id='abs-cont' class="full-size" style="position: absolute; height: 0px">
    <img class="full-size" id='icon' style="height: 0px; object-fit: contain; padding: 10px;"/>
</div>

<div class="container">
  <div class="panel" style="height: 50%">
  
	  <div class="pitanje-cont" id='pitanje_container'>
		  <span id='pitanje'></span>
	  </div>
	  
      <img id='slikaPitanje' style="height: 100%; width: 0%; object-fit: contain; padding: 10px" />
  
  </div>
  
  <div class="panel" style="height: 40%">
  <div class="full-size">
		
		    <div class="block border-list" id='block-11' style='height: 33.3%; margin-top: 5px' onclick="displayAnswer(1)">
				<label for='option-11' style='margin-left: 15px'>
					<input type='radio' name='option' value='1' id='option-11' style='transform: scale(1.6); margin-right: 10px;' />
					<label id='label1' />
				</label>
				<span id='result-11'></span>
			</div>
			
			<div class="block border-list" id='block-12' style='height: 33.3%; border-top-style: none;' onclick="displayAnswer(2)">
				<label for='option-12' style='margin-left: 15px'>
					<input type='radio' name='option' value='2' id='option-12' style='transform: scale(1.6); margin-right: 10px;' />
					<label id='label2' />
				</label>
				<span id='result-12'></span>
			</div>

	  		<div class="block border-list" id='block-13' style='height: 33.3%; border-top-style: none;' onclick="displayAnswer(3)">
				<label for='option-13' style='margin-left: 15px'>
					<input type='radio' name='option' value='3' id='option-13' style='transform: scale(1.6); margin-right: 10px;' />
					<label id='label3' />
				</label>
				<span id='result-13'></span>
			</div>
			
  </div>
  </div>
  
  
  <div class="panel block" style="height: 10%; justify-content: center">
  
  <button type='button' onclick='onLoad()' style='border: 3px solid black; width: 100px; height: 70%; border-radius: 3px; background-color: #dc3837; font-weight: 700; color: #f7dd00;'>WEITER</button>
  
  </div>
  
</div>


<script>

	let data =	'[' +
				'{ "ime":"Bananen lose" , "broj":"1" }' +
				',{ "ime":"Apfel lose (rot)" , "broj":"2" }' +
				',{ "ime":"Sellerie lose" , "broj":"4" }' +
				',{ "ime":"Bio Ingwer lose" , "broj":"11" }' +

				',{ "ime":"Birne Abate Premium" , "broj":"18" }' +
				',{ "ime":"Apfel lose (grün)" , "broj":"21" }' +
				',{ "ime":"Tomaten Rispen lose" , "broj":"27" }' +
				',{ "ime":"Weißkohl lose" , "broj":"28" }' +

				',{ "ime":"Bananen Chiquita" , "broj":"30" }' +
				',{ "ime":"Apfel Pink Lady lose" , "broj":"32" }' +
				',{ "ime":"Erdbeeren lose" , "broj":"42" }' +
				',{ "ime":"Paprika rot lose" , "broj":"44" }' +

				',{ "ime":"Aprikosen lose" , "broj":"47" }' +
				',{ "ime":"Wassermelonen lose" , "broj":"50" }' +
				',{ "ime":"Nektarinen Gelbfl. lose" , "broj":"52" }' +
				',{ "ime":"Kirschen lose" , "broj":"67" }' +

				',{ "ime":"Birne rot lose" , "broj":"80" }' +
				',{ "ime":"Trauben hell kernlos lose" , "broj":"81" }' +
				',{ "ime":"Zucchini lose" , "broj":"84" }' +
				',{ "ime":"Grapefruit rose Stück" , "broj":"548" }' +

				',{ "ime":"Lauch/Porree Stück" , "broj":"620" }' +
				',{ "ime":"Avocado vorgereift" , "broj":"642" }' +
				',{ "ime":"Kiwi Stück" , "broj":"644" }' +
				',{ "ime":"Mango" , "broj":"646" }' +


				',{ "ime":"Salat Kopfsalat" , "broj":"666" }' +
				',{ "ime":"Gurken" , "broj":"683" }' +
				',{ "ime":"Kohlrabi" , "broj":"725" }' +
				',{ "ime":"Kartoffeln 4 kg" , "broj":"739" }' +
				',{ "ime":"Lauchzwiebel" , "broj":"745" }' +
				',{ "ime":"Radieschen" , "broj":"751" }' +	

				',{ "ime":"Aubergine" , "broj":"852" }' +
				',{ "ime":"Blumenkohl" , "broj":"883" }' +
				',{ "ime":"Träger leer ganzer Kasten" , "broj":"2902" }' +
				',{ "ime":"Baumwolltragetasche" , "broj":"7387" }' +

				',{ "ime":"Bauerngluck" , "broj":"/" }' +
				',{ "ime":"Biodinkelgluck" , "broj":"/" }' +
				',{ "ime":"Biovitales" , "broj":"/" }' +
				',{ "ime":"Bockergluck" , "broj":"/" }' +

				',{ "ime":"Dinkelliebe" , "broj":"/" }' +
				',{ "ime":"Doppelschrippe" , "broj":"/" }' +
				',{ "ime":"Elsässer" , "broj":"/" }' +
				',{ "ime":"Großerchamp" , "broj":"/" }' +

				',{ "ime":"Kaisergold" , "broj":"/" }' +
				',{ "ime":"Knuspersonne" , "broj":"/" }' +
				',{ "ime":"Kornkäpitan" , "broj":"/" }' +
				',{ "ime":"Kürbiskerl" , "broj":"/" }' +

				',{ "ime":"Meiesterstücke" , "broj":"/" }' +
				',{ "ime":"Rogenkruste" , "broj":"/" }' +
				',{ "ime":"Rogenkrusti" , "broj":"/" }' +
				',{ "ime":"Rosi_s_Liebling" , "broj":"/" }' +

				',{ "ime":"Toscaninis" , "broj":"/" }' +
				',{ "ime":"Urgetreidebrot" , "broj":"/" }' +
				',{ "ime":"Weizenkruste" , "broj":"/" }' +
				',{ "ime":"Weltmeister" , "broj":"/" }' +
				',{ "ime":"Xxl_Orientaler" , "broj":"/" }' +
							
				']';
				
	var correct = 0;
	var selfCounter = 0;
	var imageCounter = 0;
	var arr = [];					
	let jsonData = JSON.parse(data);
	var leiter = false;

	onLoad();
				
	function onLoad() {
			
				resetElements();

				correct = 0;
				arr = [];	
				imageCounter += 1;
				//selfCounter += 1;
				var shouldImage = imageCounter > 4;
				//leiter = false;
				
			do {
			var numm = Math.floor(Math.random() * Object.keys(jsonData).length);
			
			  if(!arr.includes(numm)){
				
				//if(jsonData[numm].ime == 'Filliale_Leiter' && selfCounter > 10){
				//	leiter = true;
				//	shouldImage = true;
				//	selfCounter = 0;
				//}
				if(shouldImage && jsonData[numm].broj.includes('/')){
					arr.push(numm);
					imageCounter = 0;
				}
				else if(!shouldImage && !jsonData[numm].broj.includes('/')){
									arr.push(numm);
				}
				
							  }
			}
			while (arr.length < 3); 
			
			correct = arr[Math.floor(Math.random() * arr.length)];
			
//console.log(imageCounter);
//console.log(correct);
console.log(jsonData[correct]);
//console.log(arr);
//console.log(jsonData);
					
			var property = Math.floor(Math.random() * 2) + 1; 
//			var slikaSelected = jsonData[correct].broj.includes('/');

			document.getElementById('pitanje').innerHTML = "";
			document.getElementById('pitanje_container').style.height = "100%";
			document.getElementById('slikaPitanje').style.width = "0px";
			
			//ime
			if(property == 1 && !shouldImage){
			
			document.getElementById('pitanje').innerHTML = jsonData[correct].ime;

			document.getElementById('label1').innerText = jsonData[arr[0]].broj;
			document.getElementById('label2').innerText = jsonData[arr[1]].broj;
			document.getElementById('label3').innerText = jsonData[arr[2]].broj;
			//document.getElementById('label4').innerText = jsonData[arr[3]].broj;
			//document.getElementById('label5').innerText = jsonData[arr[4]].broj;
			
			}
			//broj
			else if(property == 2 && !shouldImage){
			
			document.getElementById('pitanje').innerHTML = jsonData[correct].broj;
            
			document.getElementById('label1').innerText = jsonData[arr[0]].ime;
			document.getElementById('label2').innerText = jsonData[arr[1]].ime;
			document.getElementById('label3').innerText = jsonData[arr[2]].ime;
			//document.getElementById('label4').innerText = jsonData[arr[3]].ime;
			//document.getElementById('label5').innerText = jsonData[arr[4]].ime;

			}
			//slika
			else if(shouldImage){
			
			document.getElementById('pitanje_container').style.height = "0px";
			document.getElementById('slikaPitanje').style.width = "100%";

			document.getElementById('slikaPitanje').src = 'slike/' + jsonData[correct].ime + '.jpg';

			document.getElementById('label1').innerText = jsonData[arr[0]].ime;
			document.getElementById('label2').innerText = jsonData[arr[1]].ime;
			document.getElementById('label3').innerText = jsonData[arr[2]].ime;
			//document.getElementById('label4').innerText = jsonData[arr[3]].ime;
			//document.getElementById('label5').innerText = jsonData[arr[4]].ime;
			
			}		
						
	}
				

	function selectOption(index){
	
	
	 for (let i = 1; i < 4; i++) { 
				document.getElementById('option-1'+i.toString()).checked = (i == index);
};
	
	displayAnswer();
	
	}
				
  //    The function evaluates the answer and displays result
  function displayAnswer(index) {
	
	
	//var checked = '';
	//var index = 0;
	//
	//if (document.getElementById('option-11').checked) {
    //  checked = document.getElementById('label1').innerText;
	//  index = 1;
    //}
    //if (document.getElementById('option-12').checked) {
    //  checked = document.getElementById('label2').innerText;
	//  	  index = 2;
    //
    //}
    //if (document.getElementById('option-13').checked) {
    //  checked = document.getElementById('label3').innerText;
	//  	  index = 3;
    //
    //}
    //if (document.getElementById('option-14').checked) {
    //  checked = document.getElementById('label4').innerText;
	//  	  index = 4;
    //}
	//if (document.getElementById('option-15').checked) {
    //  checked = document.getElementById('label5').innerText;
	//  	  index = 5;
    //}
	
	document.getElementById('option-1'+index.toString()).checked = true;
	
	checked = document.getElementById('label'+index.toString()).innerText;
	
	document.getElementById('abs-cont').style.height = '100%';

	if(checked == jsonData[correct].ime || checked == jsonData[correct].broj){
	
	document.getElementById('icon').src = 'svg/ja.png';

	document.getElementById('icon').classList.add('popup');		
	  //document.getElementById('block-1'+index.toString()).style.border = '3px solid limegreen'
      //document.getElementById('result-1'+index.toString()).style.color = 'limegreen'
      //document.getElementById('result-1'+index.toString()).innerHTML = 'Bravo!'
	}
	else{
	
		document.getElementById('icon').src = 'svg/nein.png';
		//document.getElementById('icon').style = 'full-size popup';
		
		document.getElementById('icon').classList.add('popup');
	  //document.getElementById('block-1'+index.toString()).style.border = '3px solid red'
      //document.getElementById('result-1'+index.toString()).style.color = 'red'
      //document.getElementById('result-1'+index.toString()).innerHTML = 'Netocno!'
	}
	
	setTimeout(function(){
	  document.getElementById('abs-cont').style.height = '0px';
	  
	  document.getElementById('icon').classList.remove('popup');		
	  document.getElementById('icon').src = '';	

	}, 500);
  }
  
  function resetElements()
  {
 for (let i = 1; i < 4; i++) { 
	//	document.getElementById('block-1'+i.toString()).style.border = '0px solid red'
    //  document.getElementById('result-1'+i.toString()).style.color = 'white'
    //  document.getElementById('result-1'+i.toString()).innerHTML = ''
	
	document.getElementById('option-1'+i.toString()).checked = false;
};
  }
  
</script>
</body>
</html> 